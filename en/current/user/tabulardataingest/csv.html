
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>CSV/TSV &#8212; LibraData Dataverse</title>
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-3.4.1.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-3.4.1.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <script type="text/javascript" src="../../_static/navbarscroll.js"></script>
    <script type="text/javascript" src="../../_static/dv_rebind_bootstrap_ui.js"></script>
<link type="text/css" rel="stylesheet" href="../../_static/fontcustom.css" />
<link type="text/css" rel="stylesheet" href="../../_static/socicon.css" />
<link type="text/css" rel="stylesheet" href="../../_static/theme.css" />
<link type="text/css" rel="stylesheet" href="../../_static/primefaces.css" />
<link type="text/css" rel="stylesheet" href="../../_static/docsdataverse_org.css" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="apple-mobile-web-app-capable" content="yes">
<link type="image/png" rel="icon" href="../../_static/images/favicondataverse.png" />

  </head><body>








<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#dv-bs-navbar-details">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://dataverse.lib.virginia.edu" id="dataverse-org-homepage-url"">LibraData a Dataverse Repository</a>
        </div>


        <!-- Collect the nav links, forms, and other content for toggling -->

       <div class="collapse navbar-collapse" id="dv-bs-navbar-details">
       </div><!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->


</nav>


<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../account.html">LibraData Account Creation &amp; Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../glossary.html">Glossary of Terms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../icon-glossary.html">Glossary of Icons &amp; Symbols</a></li>
<li class="toctree-l2"><a class="reference internal" href="../find-use-data.html">Finding and Using Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dataverse-management.html">Dataverse Collection Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dataset-management.html">Dataset + File Management</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Tabular Data File Ingest</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="supportedformats.html">Supported File Formats</a></li>
<li class="toctree-l3"><a class="reference internal" href="ingestprocess.html">Tabular Data, Representation, Storage and Ingest</a></li>
<li class="toctree-l3"><a class="reference internal" href="spss.html">SPSS</a></li>
<li class="toctree-l3"><a class="reference internal" href="stata.html">Stata</a></li>
<li class="toctree-l3"><a class="reference internal" href="rdata.html">R Data Format</a></li>
<li class="toctree-l3"><a class="reference internal" href="excel.html">Excel</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">CSV/TSV</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../appendix.html">Appendix</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data-policies.html">LibraData Policies and Sharing Norms</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    <div class="col-md-9 content">
      
  <div class="section" id="csv-tsv">
<h1>CSV/TSV<a class="headerlink" href="#csv-tsv" title="Permalink to this headline">¶</a></h1>
<div class="section" id="ingest-of-comma-separated-values-and-tab-separated-values-files-as-tabular-data">
<h2>Ingest of Comma-Separated Values and Tab-Separated Values files as tabular data<a class="headerlink" href="#ingest-of-comma-separated-values-and-tab-separated-values-files-as-tabular-data" title="Permalink to this headline">¶</a></h2>
<p>Dataverse will make an attempt to turn CSV and TSV files uploaded by the user into tabular data, using the <a class="reference external" href="https://commons.apache.org/proper/commons-csv/">Apache CSV parser</a>.</p>
</div>
<div class="section" id="main-formatting-requirements">
<h2>Main formatting requirements<a class="headerlink" href="#main-formatting-requirements" title="Permalink to this headline">¶</a></h2>
<p>The first row in the document will be treated as the CSV’s header, containing variable names for each column.</p>
<p>Each following row must contain the same number of comma-separated values (“cells”) as that header.</p>
<p>As of the Dataverse 4.8 release, we allow ingest of CSV files with commas and line breaks within cells. A string with any number of commas and line breaks enclosed within double quotes is recognized as a single cell. Double quotes can be encoded as two double quotes in a row (<code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>).</p>
<p>For example, the following lines:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>a,b,&quot;c,d
efgh&quot;&quot;ijk&quot;&quot;l&quot;,m,n
</pre></div>
</div>
<p>are recognized as a <strong>single</strong> row with <strong>5</strong> comma-separated values (cells):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>a
b
c,d\nefgh&quot;ijk&quot;l
m
n
</pre></div>
</div>
<p>(where <code class="docutils literal notranslate"><span class="pre">\n</span></code> is a new line character)</p>
</div>
<div class="section" id="limitations">
<h2>Limitations<a class="headerlink" href="#limitations" title="Permalink to this headline">¶</a></h2>
<p>Compared to other formats, relatively little information about the data (“variable-level metadata”) can be extracted from a CSV file. Aside from the variable names supplied in the top line, the ingest will make an educated guess about the data type of each comma-separated column. One of the supported rich file formats (Stata, SPSS and R) should be used if you need to provide more descriptive variable-level metadata (variable labels, categorical values and labels, explicitly defined data types, etc.).</p>
</div>
<div class="section" id="recognized-data-types-and-formatting">
<h2>Recognized data types and formatting<a class="headerlink" href="#recognized-data-types-and-formatting" title="Permalink to this headline">¶</a></h2>
<p>The application will attempt to recognize numeric, string, and date/time values in the individual comma-separated columns.</p>
<p>For dates, the <code class="docutils literal notranslate"><span class="pre">yyyy-MM-dd</span></code> format is recognized.</p>
<p>For date-time values, the following 2 formats are recognized:</p>
<p><code class="docutils literal notranslate"><span class="pre">yyyy-MM-dd</span> <span class="pre">HH:mm:ss</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">yyyy-MM-dd</span> <span class="pre">HH:mm:ss</span> <span class="pre">z</span></code> (same format as the above, with the time zone specified)</p>
<p>For numeric variables, the following special values are recognized:</p>
<p><code class="docutils literal notranslate"><span class="pre">inf</span></code>, <code class="docutils literal notranslate"><span class="pre">+inf</span></code> - as a special IEEE 754 “positive infinity” value;</p>
<p><code class="docutils literal notranslate"><span class="pre">NaN</span></code> - as a special IEEE 754 “not a number” value;</p>
<p>An empty value (i.e., a comma followed immediately by another comma, or the line end), or <code class="docutils literal notranslate"><span class="pre">NA</span></code> - as a <em>missing value</em>.</p>
<p><code class="docutils literal notranslate"><span class="pre">null</span></code> - as a numeric <em>zero</em>.</p>
<p>(any combinations of lower and upper cases are allowed in the notations above).</p>
<p>In character strings, an empty value (a comma followed by another comma, or the line end) is treated as an empty string (NOT as a <em>missing value</em>).</p>
<p>Any non-Latin characters are allowed in character string values, <strong>as long as the encoding is UTF8</strong>.</p>
<p><strong>Note:</strong> When the ingest recognizes a CSV column as a numeric vector, or as a date/time value, this information is reflected and saved in the database as the <em>data variable metadata</em>. To inspect that metadata, click on the <em>Download</em> button next to a tabular data file, and select <em>Variable Metadata</em>. This will export the variable records in the DDI XML format. (Alternatively, this metadata fragment can be downloaded via the Data Access API; for example: <code class="docutils literal notranslate"><span class="pre">http://localhost:8080/api/access/datafile/&lt;FILEID&gt;/metadata/ddi</span></code>).</p>
<p>The most immediate implication is in the calculation of the UNF signatures for the data vectors, as different normalization rules are applied to numeric, character, and date/time values. (see the <a class="reference external" href="http://guides.dataverse.org/en/latest/developers/unf/index.html">Universal Numerical Fingerprint (UNF)</a> section for more information). If it is important to you that the UNF checksums of your data are accurately calculated, check that the numeric and date/time columns in your file were recognized as such (as <code class="docutils literal notranslate"><span class="pre">type=numeric</span></code> and <code class="docutils literal notranslate"><span class="pre">type=character,</span> <span class="pre">category=date(time)</span></code>, respectively). If, for example, a column that was supposed to be numeric is recognized as a vector of character values (strings), double-check that the formatting of the values is consistent. Remember, a single improperly-formatted value in the column will turn it into a vector of character strings, and result in a different UNF. Fix any formatting errors you find, delete the file from the dataset, and try to ingest it again.</p>
</div>
</div>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
      <p>LibraData, UVa’s Institutional Dataverse Repository, Software Developed at <a href="http://www.iq.harvard.edu/" title="Institute for Quantitative Social Science" target="_blank">Harvard's IQSS</a>  &nbsp;|&nbsp;  Code available at <a href="https://github.com/IQSS/dataverse" title="Dataverse on GitHub" target="_blank"><span class="socicon socicon-github"></span></a> &nbsp;|&nbsp; Created using <a href="http://sphinx.pocoo.org/" title="Sphinx" target="_blank">Sphinx</a> 1.8.5<br/>Last updated on Feb 01, 2022 &nbsp;|&nbsp; Dataverse Software v. 5.9 &nbsp;
</p>
        <p>Copyright &#169; 2022 by the Rector and Visitors of the University of Virginia</p> 
  </div>
</footer>
<script>
    $jqTheme(document).ready(function () {
        // Rebind bootstrap UI components
        bind_bsui_components();
    });
</script>

  </body>
</html>